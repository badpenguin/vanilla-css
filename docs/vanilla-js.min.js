var hasClassList="classList"in document.createElement("p");hasClassList||console.error("[polyfill] no classList support",navigator.userAgent);Array.prototype.forEach||(console.warn("[polyfill] Array.forEach"),Array.prototype.forEach=function(a,c){c=c||window;for(var b=0;b<this.length;b++)a.call(c,this[b],b,this)});window.NodeList&&!NodeList.prototype.forEach&&(console.warn("[polyfill] NodeList.forEach"),NodeList.prototype.forEach=Array.prototype.forEach);
window.HTMLCollection&&!HTMLCollection.prototype.forEach&&(HTMLCollection.prototype.forEach=Array.prototype.forEach);
Element.prototype.matches||(console.warn("[polyfill] Element.matches"),Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){a=(this.document||this.ownerDocument).querySelectorAll(a);for(var c=a.length;0<=--c&&a.item(c)!==this;);return-1<c});
Object.assign||(console.warn("[polyfill] Object.assign"),Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(a,c){if(void 0===a||null===a)throw new TypeError("Cannot convert first argument to object");for(var b=Object(a),e=1;e<arguments.length;e++){var d=arguments[e];if(!(void 0===d||null===d))for(var d=Object(d),g=Object.keys(Object(d)),f=0,l=g.length;f<l;f++){var h=g[f],k=Object.getOwnPropertyDescriptor(d,h);void 0!==k&&k.enumerable&&(b[h]=d[h])}}return b}}));var $one=document.querySelector.bind(document),$all=document.querySelectorAll.bind(document);function $find(a,c){return a.querySelectorAll(c)}NodeList.prototype.first=function(){return this.item(0)};var $forEach=function(a,c,b){for(var e=0;e<a.length;e++)c.call(b,a[e],e)},$allEach=function(a,c){var b=$all(a);if(!b)return console.warn("$allEach selector not found"),!1;$forEach(b,c)};function $onReady(a){"loading"!==document.readyState?a():document.addEventListener("DOMContentLoaded",a)}
function $onLoad(a){"complete"===document.readyState?a():window.addEventListener("load",a)}function $triggerEvent(a,c){var b;if(null===a)b=window.document;else if(a instanceof HTMLElement)b=a;else if("string"===typeof a||a instanceof String)b=$one(a);else if(a instanceof HTMLDocument)b=a;else return console.error("$triggerEvent invalid element",a,c),!1;var e=document.createEvent("HTMLEvents");e.initEvent(c,!0,!0);b.dispatchEvent(e)}
function $on(a,c,b){null===a?document.addEventListener(c,function(e){b(e,a)},!1):a instanceof HTMLElement?a.addEventListener(c,function(e){b(e,a)},!1):$allEach(a,function(e){e.addEventListener(c,function(d){b(d,e)},!1)})}function $live(a,c,b){document.addEventListener(c,function(e){e.target.matches(a)&&b(e)},!1)}
function $onSwipe(a,c,b){null===a&&(a=window.document);if(!a)return console.error("$onSwipe invalid element"),!1;var e=0,d=0,g=0,f=0;b||(b=50);a.addEventListener("touchstart",function(b){e=b.changedTouches[0].screenX;d=b.changedTouches[0].screenY},{passive:!0});a.addEventListener("touchend",function(a){g=a.changedTouches[0].screenX;f=a.changedTouches[0].screenY;var h=g-e,k=f-d;if(Math.abs(h)>Math.abs(k)){if(Math.abs(h)>b)return 0>h?c("left",a):c("right",a)}else if(Math.abs(k)>b)return 0<k?c("down",
a):c("up",a)});return!0}function $addClass(a,c){return a?(a.classList.add(c),!0):!1}function $removeClass(a,c){return a?(a.classList.remove(c),!0):!1}function $hasClass(a,c){return a?a.classList.contains(c):!1}function $toggleClass(a,c){return a?(a.classList.toggle(c),!0):!1}function $hide(a){return a?(a.style.display="none",!0):!1}function $show(a,c){return a?(a.style.display=c?c:"",!0):!1}function $empty(a){if(a)for(;a.firstChild;)a.removeChild(a.firstChild)}
function $prependHead(a){document.head.insertAdjacentHTML("afterbegin",a)}function $appendBody(a){document.body.insertAdjacentHTML("beforeend",a)}Array.prototype.unique=function(){return this.filter(function(a,c,b){return b.indexOf(a)===c})};function getObject(a,c){return c.split(".").reduce(function(b,a){return"undefined"==typeof b||null===b?b:b[a]},a)}function isObject(a){return null!=a&&"object"==typeof a}function isFunction(a){return"function"==typeof a};var $ajax=function(a,c,b,e){var d=new XMLHttpRequest;d.open(a,c,!0);isObject(b)||(console.warn("$ajax: options is not an object"),b={});b.timeout&&(console.warn("setting timeout"),d.timeout=b.timeout);b.withCredentials&&(d.withCredentials=b.withCredentials);a=b.data||null;if(b.sendUrlencoded){d.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");c=[];for(var g in a)a.hasOwnProperty(g)&&c.push(encodeURIComponent(g)+"="+encodeURIComponent(a[g]));a=c.join("&").replace(/%20/g,
"+");console.warn("new data form urlencoded",a)}b.sendFormData&&d.setRequestHeader("Content-Type","multipart/form-data");b.sendJson&&(d.setRequestHeader("Content-Type","application/json; charset=UTF-8"),a=JSON.stringify(a),console.warn("new data json",a));if(b.headers){console.warn("TODO headers");for(var f in b.headers)b.headers.hasOwnProperty(f)&&(console.warn("k,v",f,b.headers[f]),d.setRequestHeader(f,b.headers[f]))}getObject(d,"upload.onprogress")?(console.warn("hook upload"),b.onprogress&&(d.upload.onprogress=
function(d){var a=Math.round(100*(d.loaded/d.total));b.onprogress(a,d)})):console.warn("no upload");d.onreadystatechange=function(){console.log("[$ajax] onreadystatechange",d.readyState,d.status,d.statusText)};d.onload=function(){console.log("[$ajax] onload",d.status,d.statusText);e(!0,d)};d.onabort=function(){console.log("[$ajax] onabort",d.status,d.statusText);e(!1,d)};d.onerror=function(){console.error("[$ajax] onerror",d.status,d.statusText);e(!1,d)};d.ontimeout=function(){console.error("[$ajax] ontimeout",
d.status,d.statusText);e(!1,d)};b.data?d.send(a):d.send()};function getCookie(a){return(a=document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)"))?a[2]:null}function setCookie(a,c,b){var e=new Date;e.setTime(e.getTime()+864E5*b);document.cookie=a+"="+c+";path=/;expires="+e.toGMTString()}function removeCookie(a){setCookie(a,"",-1)};function $copyright(a,c){var b={};b.title=a||"This material is copyright by the author - All Right Reserved";b.notify=function(){console.warn(b.title);isFunction(c)&&c(b.title)};window.document.addEventListener("contextmenu",function(a){a.preventDefault();b.notify();return!1},!1);window.document.addEventListener("copy",function(a){a.preventDefault();a.clipboardData.setData("text/plain",b.title);b.notify();return!1},!1);window.document.addEventListener("dragstart",function(a){a.preventDefault();b.notify();
return!1},!1)};function $lazyload(a,c){"IntersectionObserver"in window&&("IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&!("isIntersecting"in IntersectionObserverEntry.prototype))&&Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}});var b={};if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!("intersectionRatio"in window.IntersectionObserverEntry.prototype))console.warn("$lazyload: not supported.");
else return b.images=[],b.options={autoLoad:!1,cancelInitialLoad:!1},b.options=Object.assign(b.options,c),b.preloadImage=function(b){var a=b.getAttribute("data-src");if(a&&(b.removeAttribute("data-src"),$addClass(b,"lazyloading"),b.onload=function(){$addClass(b,"lazyloaded");$removeClass(b,"lazyloading")},b.setAttribute("src",a),a=b.getAttribute("data-srcset")))b.removeAttribute("data-srcset"),b.setAttribute("srcset",a)},$onReady(function(){if("IntersectionObserver"in window){var e=new IntersectionObserver(function(a,
e){a.forEach(function(a){a.isIntersecting&&(b.preloadImage(a.target),e.unobserve(a.target))})},{rootMargin:"400px",threshold:0});b.images=[];$all(a).forEach(function(a){if(b.options.cancelInitialLoad){var c=a.getAttribute("src");c&&(a.removeAttribute("src"),a.setAttribute("data-src",c))}a.hasAttribute("data-src")&&(a.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",$addClass(a,"lazyloading"),c=a.getAttribute("srcset"),a.removeAttribute("srcset"),c&&a.setAttribute("data-srcset",c),
e.observe(a),b.images.push(a))});b.options.autoLoad&&$onLoad(function(){b.images.forEach(function(a,e){setTimeout(function(){b.preloadImage(a)},1E3*(e+2))})})}else console.warn("[$onReady] $lazyload: not supported.")}),{}};function $disableScreenScrolling(){document.body.style.touchAction="none";$addClass(document.body,"bp-disable-scroll")}function $restoreScreenScrolling(){document.body.style.touchAction="";$removeClass(document.body,"bp-disable-scroll")}var lightboxInstanceCount=0;
function $lightbox(a,c){var b={initialized:!1,modalId:null,modal:null,modalImage1:null,modalImage2:null,modalCaption:null,modalNext:null,modalPrev:null,images:[],currentIndex:0,singleMode:!1,isOpen:!1,insertCss:function(){$one("#lightbox-inline-css")||$prependHead('<style id="lightbox-inline-css">.lightbox-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:2;pointer-events:none;opacity:0;transform:scale(0);transition:opacity .4s ease-in-out, transform .3s ease-in-out;}.lightbox-modal.lightbox-modal--open{pointer-events:auto;display:block;opacity:1;transform:scale(1);}.lightbox-modal img{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100vh;object-fit:contain;opacity:0;transition:all .4s ease-in-out}.lightbox-close{position:absolute;top:10px;right:10px;font-size:3rem;cursor:pointer;}.lightbox-next,.lightbox-prev{position:absolute;top:calc(50% - 50px);font-size:6rem;line-height:100px;cursor:pointer;}.lightbox-modal.lightbox-modal--single-mode .lightbox-next,.lightbox-modal.lightbox-modal--single-mode .lightbox-prev{display:none}.lightbox-next{right:10px;}.lightbox-prev{left:10px;}</style>')},
insertModal:function(){lightboxInstanceCount++;b.modalId="lightbox-modal-"+lightboxInstanceCount;$appendBody('<div id="'+b.modalId+'" class="lightbox-modal">\n<figure><img alt=""><img alt=""><figcaption/></figure>\n<div class="lightbox-close">&times;</div>\n<div class="lightbox-next">&rsaquo;</div>\n<div class="lightbox-prev">&lsaquo;</div>\n</div>')},checkModal:function(){b.insertModal();b.modal=$one("#"+b.modalId);var a=$find(b.modal,"img");b.modalImage1=a[0];b.modalImage2=a[1];b.modalCaption=$find(b.modal,
"figcaption").first();a=$find(b.modal,".lightbox-close").first();b.modalNext=$find(b.modal,".lightbox-next").first();b.modalPrev=$find(b.modal,".lightbox-prev").first();$onSwipe(b.modal,function(a){b.isOpen&&("left"===a?b.next():"right"===a?b.prev():b.hide())});window.addEventListener("keydown",function(a){if(b.isOpen){var e=a.key;"ArrowRight"===e?(a.preventDefault(),a.stopImmediatePropagation(),b.next()):"ArrowLeft"===e?(a.preventDefault(),a.stopImmediatePropagation(),b.prev()):"Escape"===e?(a.preventDefault(),
a.stopImmediatePropagation(),b.hide()):" "===e?(a.preventDefault(),a.stopImmediatePropagation(),b.next()):"s"===e&&!0===a.ctrlKey&&(a.preventDefault(),a.stopImmediatePropagation(),b.next())}});a.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();b.hide()});b.modalImage1.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();b.next()});b.modalImage2.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();b.next()});
b.modalImage1.addEventListener("load",function(){b.modalImage1.style.opacity="1";b.modalImage2.style.opacity="0"});b.modalImage2.addEventListener("load",function(){b.modalImage2.style.opacity="1";b.modalImage1.style.opacity="0"});b.modalNext.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();b.next()});b.modalPrev.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();b.prev()})},scanElement:function(a){var d=a.getAttribute("data-src")||
a.getAttribute("href")||a.getAttribute("src");if(d){var c=a.getAttribute("data-title")||a.getAttribute("title")||a.getAttribute("alt");if(!c){var f=$find(a,"img").first();f&&(c=f.getAttribute("data-title")||f.getAttribute("title")||f.getAttribute("alt"));if(!c)if(f=$find(a,"figcaption").first())c=f.innerText;else if((f=a.nextSibling)&&f.matches("figcaption"))c=f.innerText}b.images.push([d,c])}else console.warn("$lightbox: element has no valid image url",a)},checkImages:function(){$all(a).forEach(function(a){c?
$find(a,c).forEach(function(a){b.scanElement(a)}):b.scanElement(a)});1===b.images.length&&(b.singleMode=!0,$addClass(b.modal,"lightbox-modal--single-mode"))},bootstrap:function(){b.initialized||(b.checkModal(),b.checkImages(),b.initialized=!0)},switchImage:function(a){b.currentIndex=a;var d=null,c=null;0===b.currentIndex%2?(d=b.modalImage1,c=b.modalImage2):(d=b.modalImage2,c=b.modalImage1);c.setAttribute("title","");b.modalCaption.innerText="";d.src=b.images[a][0];if(a=b.images[a][1])d.setAttribute("title",
a),b.modalCaption.innerText=a},show:function(a){b.hide();b.switchImage(a);b.isOpen=!0;$disableScreenScrolling();setTimeout(function(){$addClass(b.modal,"lightbox-modal--open")},0);b.preloadImages()},preloadImages:function(){b.images.map(function(a){return a[0]}).unique().slice(1).forEach(function(a){(new Image).src=a})},hide:function(){b.isOpen=!1;$removeClass(b.modal,"lightbox-modal--open");$restoreScreenScrolling();b.modalImage1.style.opacity="0";b.modalImage2.style.opacity="0"},next:function(){if(!b.singleMode){var a=
b.currentIndex+1;if(a<b.images.length)return b.switchImage(a)}b.hide()},prev:function(){if(!b.singleMode){var a=b.currentIndex-1;if(0<=a)return b.switchImage(a)}b.hide()},detectUrl:function(a){a=a.getAttribute("data-src")||a.getAttribute("href")||a.getAttribute("src");for(var c=0;c<b.images.length;c++)if(b.images[c][0]===a)return c;return!1}};b.insertCss();$on(a,"click",function(c){b.bootstrap();if(0===b.images.length)console.warn("$lightbox: no images found");else{for(var d=c.target,g=b.detectUrl(d);!1===
g;){if(d.matches(a)){console.warn("$lightbox: clicked element url not found in main selector");return}d=d.parentNode;if("function"!==typeof d.getAttribute){console.error("$lightbox: cannot find the clicked element in document");return}g=b.detectUrl(d)}c.preventDefault();c.stopImmediatePropagation();return b.show(g)}});return{}};function $scrollDetector(a){function c(a){e!==a&&(e=a,$triggerEvent(window.document,"scroll-"+a))}var b=window.pageYOffset,e="";a=a?a:100;document.addEventListener("scroll",function(d){d=window.pageYOffset;if(Math.abs(d-b)>a){var e=d>b?"down":"up";b=d;return c(e)}if(0===d)return b=d,c("top");if(window.pageYOffset+window.innerHeight+a>(void 0!==document.height?document.height:document.body.offsetHeight))return b=d,c("bottom")})};function $inViewport(a,c){var b=a.getBoundingClientRect();return 0<=b.top&&b.top+c<=(window.innerHeight||document.documentElement.clientHeight)}function $windowScrollTop(){return window.scrollY||document.body.scrollTop||document.documentElement.scrollTop}
function $visibility(a,c,b){var e={};e.options=Object.assign({invisibleClass:"invisible",visibleClass:"animate--start",easing:null},c);e.refreshList=function(){var a=e.options.easing?e.options.easing:0.05*(window.innerHeight||document.documentElement.clientHeight);$forEach(e.nodeList,function(c){$inViewport(c,a)?c.hasAttribute("data-visibile")||(c.setAttribute("data-visibile",!0),e.options.invisibleClass&&$removeClass(c,e.options.invisibleClass),e.options.visibleClass&&$addClass(c,e.options.visibleClass),
b&&b(c,!0)):c.hasAttribute("data-visibile")&&(c.removeAttribute("data-visibile"),e.options.visibleClass&&$removeClass(c,e.options.visibleClass),e.options.invisibleClass&&$addClass(c,e.options.invisibleClass),b&&b(c,!1))})};e.nodeList=Array.prototype.slice.call($all(a));e.refreshList();0<e.nodeList.length?document.addEventListener("scroll",e.refreshList):console.warn("$visibility: no hidden elements");return{}};
