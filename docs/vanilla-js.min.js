var hasClassList="classList"in document.createElement("p");function onPageReady(c){"loading"!==document.readyState&&c();document.addEventListener("DOMContentLoaded",c)}function onPageLoad(c){"complete"===document.readyState&&c();window.addEventListener("load",c)}var $=document.querySelector.bind(document),$all=document.querySelectorAll.bind(document),$forEach=function(c,d,a){for(var b=0;b<c.length;b++)d.call(a,c[b],b)};NodeList.prototype.first=function(){return this.item(0)};
function $find(c,d){return c.querySelectorAll(d)}function $prepend(c){document.head.insertAdjacentHTML("afterbegin",c)}function $append(c){document.body.insertAdjacentHTML("beforeend",c)}function $disableScreenScrolling(){document.body.style.touchAction="none";$addClass(document.body,"bp-disable-scroll")}function $restoreScreenScrolling(){document.body.style.touchAction="";$removeClass(document.body,"bp-disable-scroll")}function $addClass(c,d){hasClassList?c.classList.add(d):c.className+=" "+d}
function $removeClass(c,d){hasClassList?c.classList.remove(d):c.className=c.className.replace(RegExp("(^|\\b)"+d.split(" ").join("|")+"(\\b|$)","gi")," ")}function $hasClass(c,d){return hasClassList?c.classList.contains(d):RegExp("(^| )"+d+"( |$)","gi").test(c.className)}function $toggleClass(c,d){if(c.classList)c.classList.toggle(d);else{var a=c.className.split(" "),b=a.indexOf(d);0<=b?a.splice(b,1):a.push(d);c.className=a.join(" ")}}function $hide(c){c.style.display="none"}
function $show(c,d){c.style.display=d?d:""}function $detectSwipe(c,d,a){var b=0,g=0,f=0,e=0;a||(a=50);c.addEventListener("touchstart",function(a){b=a.changedTouches[0].screenX;g=a.changedTouches[0].screenY},{passive:!0});c.addEventListener("touchend",function(c){f=c.changedTouches[0].screenX;e=c.changedTouches[0].screenY;var h=f-b,k=e-g;if(Math.abs(h)>Math.abs(k)){if(Math.abs(h)>a)return 0>h?d("left",c):d("right",c)}else if(Math.abs(k)>a)return 0<k?d("down",c):d("up",c)})}
function $triggerEvent(c,d){var a=document.createEvent("Event");a.initEvent(d,!0,!0);("string"===typeof c||c instanceof String?$(c):c).dispatchEvent(a)}function $on(c,d,a){$all(c).forEach(function(b){b.addEventListener(d,function(g){a(g,b)},!1)})}Array.prototype.unique=function(){var c={};return this.filter(function(d){return c.hasOwnProperty(d)?!1:c[d]=!0})};var lightboxInstanceCount=0;
function $lightbox(c,d){var a={initialized:!1,modalId:null,modal:null,modalImage1:null,modalImage2:null,modalCaption:null,modalNext:null,modalPrev:null,images:[],currentIndex:0,singleMode:!1,isOpen:!1,insertCss:function(){$("#lightbox-inline-css")||$prepend('<style id="lightbox-inline-css">.lightbox-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:2;pointer-events:none;opacity:0;transform:scale(0);transition:opacity .4s ease-in-out, transform .3s ease-in-out;}.lightbox-modal.open{pointer-events:auto;display:block;opacity:1;transform:scale(1);}.lightbox-modal img{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100vh;object-fit:contain;opacity:0;transition:all .4s ease-in-out}.lightbox-close{position:absolute;top:10px;right:10px;font-size:3rem;cursor:pointer;}.lightbox-next,.lightbox-prev{position:absolute;top:calc(50% - 50px);font-size:6rem;line-height:100px;cursor:pointer;}.lightbox-modal.singleMode .lightbox-next,.lightbox-modal.singleMode .lightbox-prev{display:none}.lightbox-next{right:10px;}.lightbox-prev{left:10px;}</style>')},insertModal:function(){lightboxInstanceCount++;
a.modalId="lightbox-modal-"+lightboxInstanceCount;$append('<div id="'+a.modalId+'" class="lightbox-modal">\n<figure><img alt=""><img alt=""><figcaption/></figure>\n<div class="lightbox-close">&times;</div>\n<div class="lightbox-next">&rsaquo;</div>\n<div class="lightbox-prev">&lsaquo;</div>\n</div>')},checkModal:function(){a.insertModal();a.modal=$("#"+a.modalId);var b=$find(a.modal,"img");a.modalImage1=b[0];a.modalImage2=b[1];a.modalCaption=$find(a.modal,"figcaption").first();b=$find(a.modal,".lightbox-close").first();
a.modalNext=$find(a.modal,".lightbox-next").first();a.modalPrev=$find(a.modal,".lightbox-prev").first();$detectSwipe(a.modal,function(b){a.isOpen&&("left"===b?a.next():"right"===b?a.prev():a.hide())});window.addEventListener("keydown",function(b){if(a.isOpen){var c=b.key;"ArrowRight"===c?(b.preventDefault(),b.stopImmediatePropagation(),a.next()):"ArrowLeft"===c?(b.preventDefault(),b.stopImmediatePropagation(),a.prev()):"Escape"===c?(b.preventDefault(),b.stopImmediatePropagation(),a.hide()):" "===
c?(b.preventDefault(),b.stopImmediatePropagation(),a.next()):"s"===c&&!0===b.ctrlKey&&(b.preventDefault(),b.stopImmediatePropagation(),a.next())}});b.addEventListener("click",function(b){b.preventDefault();b.stopImmediatePropagation();a.hide()});a.modalImage1.addEventListener("click",function(b){b.preventDefault();b.stopImmediatePropagation();a.next()});a.modalImage2.addEventListener("click",function(b){b.preventDefault();b.stopImmediatePropagation();a.next()});a.modalImage1.addEventListener("load",
function(){a.modalImage1.style.opacity="1";a.modalImage2.style.opacity="0"});a.modalImage2.addEventListener("load",function(){a.modalImage2.style.opacity="1";a.modalImage1.style.opacity="0"});a.modalNext.addEventListener("click",function(b){b.preventDefault();b.stopImmediatePropagation();a.next()});a.modalPrev.addEventListener("click",function(b){b.preventDefault();b.stopImmediatePropagation();a.prev()})},scanElement:function(b){var c=b.getAttribute("data-src")||b.getAttribute("href")||b.getAttribute("src");
if(c){var d=b.getAttribute("data-title")||b.getAttribute("title")||b.getAttribute("alt");if(!d){var e=$find(b,"img").first();e&&(d=e.getAttribute("data-title")||e.getAttribute("title")||e.getAttribute("alt"));if(!d&&(e=$find(b,"figcaption").first()))d=e.innerText}a.images.push([c,d])}else console.warn("$lightbox: element has no valid image url",b)},checkImages:function(){$all(c).forEach(function(b){d?$find(b,d).forEach(function(b){a.scanElement(b)}):a.scanElement(b)});1===a.images.length&&(a.singleMode=
!0,$addClass(a.modal,"singleMode"))},bootstrap:function(){a.initialized||(a.checkModal(),a.checkImages(),a.initialized=!0)},switchImage:function(b){a.currentIndex=b;var c=null,d=null;0===a.currentIndex%2?(c=a.modalImage1,d=a.modalImage2):(c=a.modalImage2,d=a.modalImage1);d.setAttribute("title","");a.modalCaption.innerText="";c.src=a.images[b][0];if(b=a.images[b][1])c.setAttribute("title",b),a.modalCaption.innerText=b},show:function(b){a.hide();a.switchImage(b);a.isOpen=!0;$disableScreenScrolling();
setTimeout(function(){$addClass(a.modal,"open")},0);a.preloadImages()},preloadImages:function(){a.images.map(function(a){return a[0]}).unique().slice(1).forEach(function(a){(new Image).src=a})},hide:function(){a.isOpen=!1;$removeClass(a.modal,"open");$restoreScreenScrolling();a.modalImage1.style.opacity="0";a.modalImage2.style.opacity="0"},next:function(){if(!a.singleMode){var b=a.currentIndex+1;if(b<a.images.length)return a.switchImage(b)}a.hide()},prev:function(){if(!a.singleMode){var b=a.currentIndex-
1;if(0<=b)return a.switchImage(b)}a.hide()},detectUrl:function(b){b=b.getAttribute("data-src")||b.getAttribute("href")||b.getAttribute("src");for(var c=0;c<a.images.length;c++)if(a.images[c][0]===b)return c;return!1}};a.insertCss();$on(c,"click",function(b){a.bootstrap();if(0===a.images.length)console.warn("$lightbox: no images found");else{for(var d=b.target,f=a.detectUrl(d);!1===f;){if(d.matches(c)){console.warn("$lightbox: clicked element url not found in main selector");return}d=d.parentNode;
if("function"!==typeof d.getAttribute){console.error("$lightbox: cannot find the clicked element in document");return}f=a.detectUrl(d)}b.preventDefault();b.stopImmediatePropagation();return a.show(f)}});return{}};function $lazyload(c,d){var a={};if(!1 in window)console.warn("$lazyload: not supported.");else return a.images=[],a.options={autoLoad:!1,cancelInitialLoad:!1},a.options=Object.assign(a.options,d),a.preloadImage=function(a){var c=a.getAttribute("data-src");if(c&&(a.removeAttribute("data-src"),$addClass(a,"lazyloading"),a.onload=function(){$addClass(a,"lazyloaded");$removeClass(a,"lazyloading")},a.setAttribute("src",c),c=a.getAttribute("data-srcset")))a.removeAttribute("data-srcset"),a.setAttribute("srcset",
c)},onPageReady(function(){var b=new IntersectionObserver(function(b,c){b.forEach(function(b){b.isIntersecting&&(a.preloadImage(b.target),c.unobserve(b.target))})},{rootMargin:"400px",threshold:0});a.images=[];$all(c).forEach(function(c){if(a.options.cancelInitialLoad){var d=c.getAttribute("src");d&&(c.removeAttribute("src"),c.setAttribute("data-src",d))}c.hasAttribute("data-src")&&(c.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",$addClass(c,"lazyloading"),d=c.getAttribute("srcset"),
c.removeAttribute("srcset"),d&&c.setAttribute("data-srcset",d),b.observe(c),a.images.push(c))});a.options.autoLoad&&onPageLoad(function(){a.images.forEach(function(b,c){setTimeout(function(){a.preloadImage(b)},1E3*(c+2))})})}),{}}
"IntersectionObserver"in window&&("IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&!("isIntersecting"in IntersectionObserverEntry.prototype))&&Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}});function $copyright(c){var d;d=c||"This material is copyright by the author - All Right Reserved";document.body.addEventListener("contextmenu",function(a){console.warn(d);a.preventDefault();return!1},!1);document.body.addEventListener("copy",function(a){console.warn(d);a.preventDefault();a.clipboardData.setData("text/plain",d);return!1},!1);document.body.addEventListener("dragstart",function(a){console.warn(d);a.preventDefault();return!1},!1)};function $inViewport(c,d){var a=c.getBoundingClientRect();return 0<=a.top&&a.top+d<=(window.innerHeight||document.documentElement.clientHeight)}function $windowScrollTop(){return window.scrollY||document.body.scrollTop||document.documentElement.scrollTop}
function $visibility(c,d,a){var b={};b.options=Object.assign({invisibleClass:"invisible",visibleClass:"animated",easing:null},d);b.refreshList=function(){var c=b.options.easing?b.options.easing:0.05*(window.innerHeight||document.documentElement.clientHeight);$forEach(b.nodeList,function(d){$inViewport(d,c)?d.hasAttribute("data-visibile")||(d.setAttribute("data-visibile",!0),b.options.invisibleClass&&$removeClass(d,b.options.invisibleClass),b.options.visibleClass&&$addClass(d,b.options.visibleClass),
a&&a(d,!0)):d.hasAttribute("data-visibile")&&(d.removeAttribute("data-visibile"),b.options.visibleClass&&$removeClass(d,b.options.visibleClass),b.options.invisibleClass&&$addClass(d,b.options.invisibleClass),a&&a(d,!1))})};b.nodeList=Array.prototype.slice.call($all(c));b.refreshList();0<b.nodeList.length?document.addEventListener("scroll",b.refreshList):console.warn("$visibility: no hidden elements");return{}};
